¿
vC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Program.cs
	namespace 	
VirtualArboretum
 
; 
public 
class 
Program 
{ 
public 

static 
async 
Task 
Main !
(! "
string" (
[( )
]) *
args+ /
)/ 0
{		 
if

 

(

 
args

 
.

 
Any

 
(

 
arg

 
=>

 
arg

 
.

  
Contains

  (
(

( )
$str

) /
)

/ 0
)

0 1
)

1 2
{ 	
} 	
if 

( 
args 
. 
Length 
== 
$num 
|| 
args  $
.$ %
Contains% -
(- .
$str. 5
)5 6
)6 7
{ 	
var 
serverService 
= 
new  #
ServerService$ 1
(1 2
)2 3
;3 4
await 
serverService 
.  
RunServerAsync  .
(. /
)/ 0
;0 1
} 	
else 
{ 	
var 
pipeService 
= 
new !
PipeService" -
(- .
). /
;/ 0
var 
serverService 
= 
new  #
ServerService$ 1
(1 2
)2 3
;3 4
var 
serverController  
=! "
new# &
ServerController' 7
(7 8
serverService8 E
)E F
;F G
var 
inputController 
=  !
new" %
CliController& 3
(3 4
pipeService4 ?
,? @
serverControllerA Q
)Q R
;R S
await 
inputController !
.! "
HandleInput" -
(- .
args. 2
)2 3
;3 4
} 	
}   
}!! ∞
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\ViewModels\RestResponse.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (

ViewModels( 2
;2 3
public 
class 
RestResponse 
< 
T 
> 
{ 
public 

string 
Status 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
Message 
{ 
get 
;  
set! $
;$ %
}& '
public 

T 
Data 
{ 
get 
; 
set 
; 
} 
public 

static 
RestResponse 
< 
T  
>  !
Success" )
() *
T* +
data, 0
,0 1
string2 8
message9 @
=A B
nullC G
)G H
{ 
return 
new 
RestResponse 
<  
T  !
>! "
{# $
Status% +
=, -
$str. 7
,7 8
Data9 =
=> ?
data@ D
,D E
MessageF M
=N O
messageP W
}X Y
;Y Z
} 
public"" 

static"" 
RestResponse"" 
<"" 
T""  
>""  !
SuccessMessage""" 0
(""0 1
string""1 7
message""8 ?
)""? @
{## 
return$$ 
new$$ 
RestResponse$$ 
<$$  
T$$  !
>$$! "
{$$# $
Status$$% +
=$$, -
$str$$. 7
,$$7 8
Message$$9 @
=$$A B
message$$C J
}$$K L
;$$L M
}%% 
public** 

static** 
RestResponse** 
<** 
T**  
>**  !
Error**" '
(**' (
string**( .
message**/ 6
)**6 7
{++ 
return,, 
new,, 
RestResponse,, 
<,,  
T,,  !
>,,! "
{,,# $
Status,,% +
=,,, -
$str,,. 5
,,,5 6
Message,,7 >
=,,? @
message,,A H
},,I J
;,,J K
}-- 
}.. 
public33 
class33 
RestResponse33 
:33 
RestResponse33 (
<33( )
object33) /
>33/ 0
{44 
public88 

new88 
static88 
RestResponse88 "
SuccessMessage88# 1
(881 2
string882 8
message889 @
)88@ A
{99 
return:: 
new:: 
RestResponse:: 
{::  !
Status::" (
=::) *
$str::+ 4
,::4 5
Message::6 =
=::> ?
message::@ G
}::H I
;::I J
};; 
public@@ 

new@@ 
static@@ 
RestResponse@@ "
Error@@# (
(@@( )
string@@) /
message@@0 7
)@@7 8
{AA 
returnBB 
newBB 
RestResponseBB 
{BB  !
StatusBB" (
=BB) *
$strBB+ 2
,BB2 3
MessageBB4 ;
=BB< =
messageBB> E
}BBF G
;BBG H
}CC 
}DD ¯
ëC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\ViewModels\PipeResult.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (

ViewModels( 2
;2 3
public 
record 

PipeResult 
( 
	MediaType "
Type# '
,' (
MemoryStream) 5
Context6 =
)= >
;> ?Ì
êC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\ViewModels\MediaType.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (

ViewModels( 2
;2 3
public 
enum 
	MediaType 
{ 
PDF 
, 
JPEG 
, 	
PNG 
, 
Text 
}		 ˆ
îC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\ViewModels\CommandResult.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (

ViewModels( 2
;2 3
public 
record 
CommandResult 
( 
bool  
Success! (
,( )
string* 0
Message1 8
)8 9
;9 :¨”
íC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Services\ServerService.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Services( 0
;0 1
public 
class 
ServerService 
: 
IServerService +
{ 
public 

const 
int 
Port 
= 
$num  
;  !
private 
const 
string 

ServerFlag #
=$ %
$str& 0
;0 1
private 
const 
string 
Hostname !
=" #
$str$ /
;/ 0
private 
static 
readonly 
string "
LockFilePath# /
=0 1
Path2 6
.6 7
Combine7 >
(> ?
Environment 
. 
GetFolderPath !
(! "
Environment" -
.- .
SpecialFolder. ;
.; <
UserProfile< G
)G H
,H I
$str 
) 	
;	 

private 
static 
readonly 
string "
LockFileName# /
=0 1
$str2 C
;C D
private 
static 
readonly 
string "
LockFile# +
=, -
Path. 2
.2 3
Combine3 :
(: ;
LockFilePath; G
,G H
LockFileNameI U
)U V
;V W
public 

bool 
ServerIsRunning 
(  
)  !
{   
if!! 

(!! 
!!! 
File!! 
.!! 
Exists!! 
(!! 
LockFilePath!! %
)!!% &
)!!& '
return!!( .
false!!/ 4
;!!4 5
try## 
{$$ 	
using%% 
var%% 
client%% 
=%% 
new%% "

HttpClient%%# -
(%%- .
)%%. /
;%%/ 0
client&& 
.&& 
Timeout&& 
=&& 
TimeSpan&& %
.&&% &
FromMilliseconds&&& 6
(&&6 7
$num&&7 :
)&&: ;
;&&; <
var'' 
response'' 
='' 
client'' !
.''! "
GetAsync''" *
(''* +
$"''+ -
$str''- 4
{''4 5
Hostname''5 =
}''= >
$str''> ?
{''? @
Port''@ D
}''D E
$str''E L
"''L M
)''M N
.''N O
Result''O U
;''U V
return(( 
response(( 
.(( 
IsSuccessStatusCode(( /
;((/ 0
})) 	
catch** 
{++ 	
CleanupLockFile,, 
(,, 
),, 
;,, 
}-- 	
return// 
false// 
;// 
}00 
private22 
void22 
CleanupLockFile22  
(22  !
)22! "
{33 
try44 
{55 	
if66 
(66 
File66 
.66 
Exists66 
(66 
LockFilePath66 (
)66( )
)66) *
{77 
File88 
.88 
Delete88 
(88 
LockFilePath88 (
)88( )
;88) *
}99 
;:: 
};; 	
catch<< 
{== 	
Console>> 
.>> 
Error>> 
.>> 
Write>> 
(>>  
$str>>  Y
)>>Y Z
;>>Z [
}?? 	
}@@ 
publicCC 

voidCC 
StartServerProcessCC "
(CC" #
)CC# $
{DD 
stringEE 
?EE 
executablePathEE 
=EE  
ProcessEE! (
.EE( )
GetCurrentProcessEE) :
(EE: ;
)EE; <
.EE< =

MainModuleEE= G
?EEG H
.EEH I
FileNameEEI Q
;EEQ R
ifFF 

(FF 
stringFF 
.FF 
IsNullOrEmptyFF  
(FF  !
executablePathFF! /
)FF/ 0
)FF0 1
returnFF2 8
;FF8 9
varHH 
	startInfoHH 
=HH 
newHH 
ProcessStartInfoHH ,
{II 	
FileNameJJ 
=JJ 
executablePathJJ %
,JJ% &
	ArgumentsKK 
=KK 

ServerFlagKK "
,KK" #
UseShellExecuteLL 
=LL 
trueLL "
,LL" #
CreateNoWindowMM 
=MM 
trueMM !
}NN 	
;NN	 

tryPP 
{QQ 	
ProcessRR 
.RR 
StartRR 
(RR 
	startInfoRR #
)RR# $
;RR$ %
}SS 	
catchTT 
(TT 
	ExceptionTT 
exTT 
)TT 
{UU 	
ConsoleVV 
.VV 
ErrorVV 
.VV 
	WriteLineVV #
(VV# $
$"VV$ &
$strVV& :
{VV: ;
exVV; =
.VV= >
MessageVV> E
}VVE F
"VVF G
)VVG H
;VVH I
}WW 	
}XX 
public[[ 

async[[ 
Task[[ 
SendCommandAsync[[ &
([[& '
string[[' -
command[[. 5
)[[5 6
{\\ 
try]] 
{^^ 	
using__ 
var__ 
client__ 
=__ 
new__ "

HttpClient__# -
(__- .
)__. /
;__/ 0
varaa 
commandObjectaa 
=aa 
newaa  #
{aa$ %
Commandaa& -
=aa. /
commandaa0 7
}aa8 9
;aa9 :
varbb 
jsonbb 
=bb 
JsonSerializerbb %
.bb% &
	Serializebb& /
(bb/ 0
commandObjectbb0 =
)bb= >
;bb> ?
varcc 
contentcc 
=cc 
newcc 
StringContentcc +
(cc+ ,
jsoncc, 0
,cc0 1
Encodingcc2 :
.cc: ;
UTF8cc; ?
,cc? @
$strccA S
)ccS T
;ccT U
varee 
responseee 
=ee 
awaitee  
clientee! '
.ee' (
	PostAsyncee( 1
(ee1 2
$"ee2 4
$stree4 E
{eeE F
PorteeF J
}eeJ K
$streeK S
"eeS T
,eeT U
contenteeV ]
)ee] ^
;ee^ _
ifgg 
(gg 
responsegg 
.gg 
IsSuccessStatusCodegg ,
)gg, -
{hh 
varii 
responseContentii #
=ii$ %
awaitii& +
responseii, 4
.ii4 5
Contentii5 <
.ii< =
ReadAsStringAsyncii= N
(iiN O
)iiO P
;iiP Q
Consolejj 
.jj 
	WriteLinejj !
(jj! "
responseContentjj" 1
)jj1 2
;jj2 3
}kk 
elsell 
{mm 
Consolenn 
.nn 
	WriteLinenn !
(nn! "
$@"nn" %
$strnn% 1
{nn1 2
responsenn2 :
.nn: ;

StatusCodenn; E
}nnE F
"nnF G
)nnG H
;nnH I
}oo 
}pp 	
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq 
{rr 	
awaitss 
Consoless 
.ss 
Errorss 
.ss  
WriteLineAsyncss  .
(ss. /
$"ss/ 1
$strss1 @
{ss@ A
exssA C
.ssC D
MessagessD K
}ssK L
"ssL M
)ssM N
;ssN O
}tt 	
}uu 
publiczz 

asynczz 
Taskzz 
RunServerAsynczz $
(zz$ %
)zz% &
{{{ 
if}} 

(}} 
ServerIsRunning}} 
(}} 
)}} 
)}} 
{~~ 	
Console 
. 
	WriteLine 
( 
$str 8
)8 9
;9 :
return
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
Console
ÉÉ 
.
ÉÉ 
	WriteLine
ÉÉ 
(
ÉÉ 
$str
ÉÉ +
)
ÉÉ+ ,
;
ÉÉ, -
	Directory
ÑÑ 
.
ÑÑ 
CreateDirectory
ÑÑ !
(
ÑÑ! "
LockFilePath
ÑÑ" .
)
ÑÑ. /
;
ÑÑ/ 0
await
ÜÜ 
File
ÜÜ 
.
ÜÜ 
WriteAllTextAsync
ÜÜ $
(
ÜÜ$ %
LockFile
áá 
,
áá 
Process
àà 
.
àà 
GetCurrentProcess
àà %
(
àà% &
)
àà& '
.
àà' (
Id
àà( *
.
àà* +
ToString
àà+ 3
(
àà3 4
)
àà4 5
)
ââ 
;
ââ 
var
ãã 
listener
ãã 
=
ãã 
new
ãã 
HttpListener
ãã '
(
ãã' (
)
ãã( )
;
ãã) *
listener
åå 
.
åå 
Prefixes
åå 
.
åå 
Add
åå 
(
åå 
$"
åå  
$str
åå  1
{
åå1 2
Port
åå2 6
}
åå6 7
$str
åå7 8
"
åå8 9
)
åå9 :
;
åå: ;
listener
çç 
.
çç 
Start
çç 
(
çç 
)
çç 
;
çç 
var
èè 
cts
èè 
=
èè 
new
èè %
CancellationTokenSource
èè -
(
èè- .
)
èè. /
;
èè/ 0
Console
êê 
.
êê 
CancelKeyPress
êê 
+=
êê !
(
êê" #
s
êê# $
,
êê$ %
e
êê& '
)
êê' (
=>
êê) +
{
ëë 	
e
íí 
.
íí 
Cancel
íí 
=
íí 
true
íí 
;
íí 
cts
ìì 
.
ìì 
Cancel
ìì 
(
ìì 
)
ìì 
;
ìì 
}
îî 	
;
îî	 

try
ññ 
{
óó 	
await
òò 
RunHttpServerLoop
òò #
(
òò# $
listener
òò$ ,
,
òò, -
cts
òò. 1
.
òò1 2
Token
òò2 7
)
òò7 8
;
òò8 9
}
ôô 	
catch
öö 
(
öö (
OperationCanceledException
öö )
)
öö) *
{
õõ 	
}
úú 	
catch
ùù 
(
ùù 
	Exception
ùù 
ex
ùù 
)
ùù 
{
ûû 	
await
†† 
Console
†† 
.
†† 
Error
†† 
.
††  
WriteLineAsync
††  .
(
††. /
$"
††/ 1
$str
††1 ?
{
††? @
ex
††@ B
.
††B C
Message
††C J
}
††J K
"
††K L
)
††L M
;
††M N
}
°° 	
finally
¢¢ 
{
££ 	
listener
§§ 
.
§§ 
Stop
§§ 
(
§§ 
)
§§ 
;
§§ 
CleanupLockFile
•• 
(
•• 
)
•• 
;
•• 
}
¶¶ 	
}
ßß 
private
¨¨ 
async
¨¨ 
Task
¨¨ 
RunHttpServerLoop
¨¨ (
(
¨¨( )
HttpListener
¨¨) 5
listener
¨¨6 >
,
¨¨> ?
CancellationToken
¨¨@ Q
cancellationToken
¨¨R c
)
¨¨c d
{
≠≠ 
while
ÆÆ 
(
ÆÆ 
!
ÆÆ 
cancellationToken
ÆÆ !
.
ÆÆ! "%
IsCancellationRequested
ÆÆ" 9
)
ÆÆ9 :
{
ØØ 	
var
∞∞ 
contextTask
∞∞ 
=
∞∞ 
listener
∞∞ &
.
∞∞& '
GetContextAsync
∞∞' 6
(
∞∞6 7
)
∞∞7 8
;
∞∞8 9
var
≤≤ 
completedTask
≤≤ 
=
≤≤ 
await
≤≤  %
Task
≤≤& *
.
≤≤* +
WhenAny
≤≤+ 2
(
≤≤2 3
contextTask
≥≥ 
,
≥≥ 
Task
≥≥ !
.
≥≥! "
Delay
≥≥" '
(
≥≥' (
Timeout
≥≥( /
.
≥≥/ 0
Infinite
≥≥0 8
,
≥≥8 9
cancellationToken
≥≥: K
)
≥≥K L
)
¥¥ 
;
¥¥ 
if
∂∂ 
(
∂∂ 
cancellationToken
∂∂ !
.
∂∂! "%
IsCancellationRequested
∂∂" 9
)
∂∂9 :
break
∑∑ 
;
∑∑ 
var
ππ 
context
ππ 
=
ππ 
await
ππ 
contextTask
ππ  +
;
ππ+ ,
_
∫∫ 
=
∫∫ 
Task
∫∫ 
.
∫∫ 
Run
∫∫ 
(
∫∫ 
async
∫∫ 
(
∫∫  
)
∫∫  !
=>
∫∫" $
await
∫∫% *$
HandleHttpRequestAsync
∫∫+ A
(
∫∫A B
context
∫∫B I
)
∫∫I J
,
∫∫J K
cancellationToken
∫∫L ]
)
∫∫] ^
;
∫∫^ _
}
ªª 	
}
ºº 
private
√√ 
async
√√ 
Task
√√ $
HandleHttpRequestAsync
√√ -
(
√√- .!
HttpListenerContext
√√. A
context
√√B I
)
√√I J
{
ƒƒ 
try
≈≈ 
{
∆∆ 	
string
«« 
response
«« 
;
«« 
if
ÀÀ 
(
ÀÀ 
context
ÀÀ 
.
ÀÀ 
Request
ÀÀ 
.
ÀÀ  

HttpMethod
ÀÀ  *
==
ÀÀ+ -
$str
ÀÀ. 3
&&
ÃÃ 
context
ÃÃ 
.
ÃÃ 
Request
ÃÃ "
.
ÃÃ" #
Url
ÃÃ# &
?
ÃÃ& '
.
ÃÃ' (
AbsolutePath
ÃÃ( 4
==
ÃÃ5 7
$str
ÃÃ8 A
)
ÃÃA B
{
ÕÕ 
response
ŒŒ 
=
ŒŒ 
await
ŒŒ  &
HandleStatusRequestAsync
ŒŒ! 9
(
ŒŒ9 :
)
ŒŒ: ;
;
ŒŒ; <
}
œœ 
else
–– 
if
–– 
(
–– 
context
–– 
.
–– 
Request
–– $
.
––$ %

HttpMethod
––% /
==
––0 2
$str
––3 9
&&
—— 
context
—— 
.
——  
Request
——  '
.
——' (
Url
——( +
?
——+ ,
.
——, -
AbsolutePath
——- 9
==
——: <
$str
——= G
)
——G H
{
““ 
response
”” 
=
”” 
await
””  '
HandleCommandRequestAsync
””! :
(
””: ;
context
””; B
.
””B C
Request
””C J
)
””J K
;
””K L
}
‘‘ 
else
’’ 
{
÷÷ 
context
◊◊ 
.
◊◊ 
Response
◊◊  
.
◊◊  !

StatusCode
◊◊! +
=
◊◊, -
$num
◊◊. 1
;
◊◊1 2
response
ÿÿ 
=
ÿÿ 
$str
ÿÿ &
;
ÿÿ& '
}
ŸŸ 
var
‹‹ 
buffer
‹‹ 
=
‹‹ 
Encoding
‹‹ !
.
‹‹! "
UTF8
‹‹" &
.
‹‹& '
GetBytes
‹‹' /
(
‹‹/ 0
response
‹‹0 8
)
‹‹8 9
;
‹‹9 :
context
›› 
.
›› 
Response
›› 
.
›› 
ContentLength64
›› ,
=
››- .
buffer
››/ 5
.
››5 6
Length
››6 <
;
››< =
context
ﬁﬁ 
.
ﬁﬁ 
Response
ﬁﬁ 
.
ﬁﬁ 
ContentType
ﬁﬁ (
=
ﬁﬁ) *
$str
ﬁﬁ+ =
;
ﬁﬁ= >
await
‡‡ 
context
‡‡ 
.
‡‡ 
Response
‡‡ "
.
‡‡" #
OutputStream
‡‡# /
.
‡‡/ 0

WriteAsync
‡‡0 :
(
‡‡: ;
buffer
‡‡; A
,
‡‡A B
$num
‡‡C D
,
‡‡D E
buffer
‡‡F L
.
‡‡L M
Length
‡‡M S
)
‡‡S T
;
‡‡T U
}
·· 	
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
ex
‚‚ 
)
‚‚ 
{
„„ 	
await
ÂÂ 
Console
ÂÂ 
.
ÂÂ 
Error
ÂÂ 
.
ÂÂ  
WriteLineAsync
ÂÂ  .
(
ÂÂ. /
$"
ÂÂ/ 1
$str
ÂÂ1 H
{
ÂÂH I
ex
ÂÂI K
.
ÂÂK L
Message
ÂÂL S
}
ÂÂS T
"
ÂÂT U
)
ÂÂU V
;
ÂÂV W
context
ÊÊ 
.
ÊÊ 
Response
ÊÊ 
.
ÊÊ 

StatusCode
ÊÊ '
=
ÊÊ( )
$num
ÊÊ* -
;
ÊÊ- .
}
ÁÁ 	
finally
ËË 
{
ÈÈ 	
context
ÍÍ 
.
ÍÍ 
Response
ÍÍ 
.
ÍÍ 
Close
ÍÍ "
(
ÍÍ" #
)
ÍÍ# $
;
ÍÍ$ %
}
ÎÎ 	
}
ÏÏ 
private
ÔÔ 
Task
ÔÔ 
<
ÔÔ 
string
ÔÔ 
>
ÔÔ &
HandleStatusRequestAsync
ÔÔ 1
(
ÔÔ1 2
)
ÔÔ2 3
{
 
if
ÒÒ 

(
ÒÒ 
!
ÒÒ 
File
ÒÒ 
.
ÒÒ 
Exists
ÒÒ 
(
ÒÒ 
LockFilePath
ÒÒ %
)
ÒÒ% &
)
ÒÒ& '
{
ÚÚ 	
return
ÛÛ 
Task
ÛÛ 
.
ÛÛ 

FromResult
ÛÛ "
(
ÛÛ" #
JsonSerializer
ÛÛ# 1
.
ÛÛ1 2
	Serialize
ÛÛ2 ;
(
ÛÛ; <
new
ÙÙ 
{
ıı 
Status
ˆˆ 
=
ˆˆ 
$str
ˆˆ $
,
ˆˆ$ %
Message
˜˜ 
=
˜˜ 
$str
˜˜ K
}
¯¯ 
)
˘˘ 
)
˘˘ 
;
˘˘ 
}
˙˙ 	
DateTime
¸¸ 
	startTime
¸¸ 
=
¸¸ 
File
¸¸ !
.
¸¸! "
GetCreationTime
¸¸" 1
(
¸¸1 2
LockFilePath
¸¸2 >
)
¸¸> ?
;
¸¸? @
TimeSpan
˝˝ 
uptime
˝˝ 
=
˝˝ 
DateTime
˝˝ "
.
˝˝" #
Now
˝˝# &
-
˝˝' (
	startTime
˝˝) 2
;
˝˝2 3
var
ˇˇ 

statusInfo
ˇˇ 
=
ˇˇ 
new
ˇˇ 
{
ÄÄ 	
Status
ÅÅ 
=
ÅÅ 
$str
ÅÅ 
,
ÅÅ 
	StartTime
ÇÇ 
=
ÇÇ 
	startTime
ÇÇ !
.
ÇÇ! "
ToString
ÇÇ" *
(
ÇÇ* +
CultureInfo
ÇÇ+ 6
.
ÇÇ6 7
InvariantCulture
ÇÇ7 G
)
ÇÇG H
,
ÇÇH I
Uptime
ÉÉ 
=
ÉÉ 
$"
ÉÉ 
{
ÉÉ 
uptime
ÉÉ 
.
ÉÉ 
Days
ÉÉ #
}
ÉÉ# $
$str
ÉÉ$ &
{
ÉÉ& '
uptime
ÉÉ' -
.
ÉÉ- .
Hours
ÉÉ. 3
}
ÉÉ3 4
$str
ÉÉ4 6
{
ÉÉ6 7
uptime
ÉÉ7 =
.
ÉÉ= >
Minutes
ÉÉ> E
}
ÉÉE F
$str
ÉÉF G
"
ÉÉG H
}
ÑÑ 	
;
ÑÑ	 

return
ÜÜ 
Task
ÜÜ 
.
ÜÜ 

FromResult
ÜÜ 
(
ÜÜ 
JsonSerializer
ÜÜ -
.
ÜÜ- .
	Serialize
ÜÜ. 7
(
ÜÜ7 8

statusInfo
ÜÜ8 B
)
ÜÜB C
)
ÜÜC D
;
ÜÜD E
}
áá 
private
åå 
async
åå 
Task
åå 
<
åå 
string
åå 
>
åå '
HandleCommandRequestAsync
åå 8
(
åå8 9!
HttpListenerRequest
åå9 L
request
ååM T
)
ååT U
{
çç 
using
éé 
var
éé 
reader
éé 
=
éé 
new
éé 
StreamReader
éé +
(
éé+ ,
request
éé, 3
.
éé3 4
InputStream
éé4 ?
)
éé? @
;
éé@ A
var
èè 
requestBody
èè 
=
èè 
await
èè 
reader
èè  &
.
èè& '
ReadToEndAsync
èè' 5
(
èè5 6
)
èè6 7
;
èè7 8
try
íí 
{
ìì 	
var
îî 
commandData
îî 
=
îî 
JsonSerializer
îî ,
.
îî, -
Deserialize
îî- 8
<
îî8 9
CommandRequest
îî9 G
>
îîG H
(
îîH I
requestBody
îîI T
)
îîT U
;
îîU V
if
ïï 
(
ïï 
commandData
ïï 
==
ïï 
null
ïï #
||
ïï$ &
string
ïï' -
.
ïï- .
IsNullOrEmpty
ïï. ;
(
ïï; <
commandData
ïï< G
.
ïïG H
Command
ïïH O
)
ïïO P
)
ïïP Q
{
ññ 
return
óó 
JsonSerializer
óó %
.
óó% &
	Serialize
óó& /
(
óó/ 0
new
òò 
{
ôô 
Status
öö 
=
öö  
$str
öö! (
,
öö( )
Message
õõ 
=
õõ  !
$str
õõ" 1
}
úú 
)
úú 
;
úú 
}
ùù 
string
üü 
commandResult
üü  
=
üü! "
await
üü# (!
ProcessCommandAsync
üü) <
(
üü< =
commandData
üü= H
.
üüH I
Command
üüI P
)
üüP Q
;
üüQ R
return
†† 
JsonSerializer
†† !
.
††! "
	Serialize
††" +
(
††+ ,
new
°° 
{
¢¢ 
Status
££ 
=
££ 
$str
££ &
,
££& '
Message
§§ 
=
§§ 
commandResult
§§ +
}
•• 
)
•• 
;
•• 
}
¶¶ 	
catch
ßß 
(
ßß 
JsonException
ßß 
)
ßß 
{
®® 	
return
©© 
JsonSerializer
©© !
.
©©! "
	Serialize
©©" +
(
©©+ ,
new
™™ 
{
´´ 
Status
¨¨ 
=
¨¨ 
$str
¨¨ $
,
¨¨$ %
Message
≠≠ 
=
≠≠ 
$str
≠≠ 6
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ 	
}
∞∞ 
private
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
string
∂∂ 
>
∂∂ !
ProcessCommandAsync
∂∂ 2
(
∂∂2 3
string
∂∂3 9
command
∂∂: A
)
∂∂A B
{
∑∑ 
var
∏∏ 
args
∏∏ 
=
∏∏ 
command
∏∏ 
.
∏∏ 
Split
∏∏  
(
∏∏  !
$char
∏∏! $
,
∏∏$ % 
StringSplitOptions
∏∏& 8
.
∏∏8 9 
RemoveEmptyEntries
∏∏9 K
)
∏∏K L
;
∏∏L M
if
ππ 

(
ππ 
args
ππ 
.
ππ 
Length
ππ 
==
ππ 
$num
ππ 
)
ππ 
return
ππ $
$str
ππ% 4
;
ππ4 5
return
ªª 
args
ªª 
[
ªª 
$num
ªª 
]
ªª 
.
ªª 
ToLower
ªª 
(
ªª 
)
ªª  
switch
ªª! '
{
ºº 	
$str
ΩΩ 
or
ΩΩ 
$str
ΩΩ 
=>
ΩΩ 
HandleExitCommand
ΩΩ  1
(
ΩΩ1 2
)
ΩΩ2 3
,
ΩΩ3 4
$str
ææ 
=>
ææ 
await
ææ "
HandleProcessCommand
ææ 3
(
ææ3 4
args
ææ4 8
)
ææ8 9
,
ææ9 :
$str
øø 
=>
øø 
$"
øø 
$str
øø /
{
øø/ 0
File
øø0 4
.
øø4 5
GetCreationTime
øø5 D
(
øøD E
LockFilePath
øøE Q
)
øøQ R
}
øøR S
"
øøS T
,
øøT U
_
¿¿ 
=>
¿¿ 
$"
¿¿ 
$str
¿¿ $
{
¿¿$ %
args
¿¿% )
[
¿¿) *
$num
¿¿* +
]
¿¿+ ,
}
¿¿, -
"
¿¿- .
}
¡¡ 	
;
¡¡	 

}
¬¬ 
private
ƒƒ 
string
ƒƒ 
HandleExitCommand
ƒƒ $
(
ƒƒ$ %
)
ƒƒ% &
{
≈≈ 
Task
∆∆ 
.
∆∆ 
Run
∆∆ 
(
∆∆ 
(
∆∆ 
)
∆∆ 
=>
∆∆ 
{
«« 	
Thread
»» 
.
»» 
Sleep
»» 
(
»» 
$num
»» 
)
»» 
;
»» 
Environment
»» *
.
»»* +
Exit
»»+ /
(
»»/ 0
$num
»»0 1
)
»»1 2
;
»»2 3
}
…… 	
)
……	 

;
……
 
return
   
$str
   (
;
  ( )
}
ÀÀ 
private
ÕÕ 
async
ÕÕ 
Task
ÕÕ 
<
ÕÕ 
string
ÕÕ 
>
ÕÕ "
HandleProcessCommand
ÕÕ 3
(
ÕÕ3 4
string
ÕÕ4 :
[
ÕÕ: ;
]
ÕÕ; <
args
ÕÕ= A
)
ÕÕA B
{
ŒŒ 
if
œœ 

(
œœ 
args
œœ 
.
œœ 
Length
œœ 
<=
œœ 
$num
œœ 
)
œœ 
return
œœ $
$str
œœ% C
;
œœC D
if
–– 

(
–– 
!
–– 
File
–– 
.
–– 
Exists
–– 
(
–– 
args
–– 
[
–– 
$num
–– 
]
––  
)
––  !
)
––! "
return
––# )
$"
––* ,
$str
––, C
{
––C D
args
––D H
[
––H I
$num
––I J
]
––J K
}
––K L
"
––L M
;
––M N
try
““ 
{
”” 	
await
‘‘ 
using
‘‘ 
var
‘‘ 
stream
‘‘ "
=
‘‘# $
File
‘‘% )
.
‘‘) *
OpenRead
‘‘* 2
(
‘‘2 3
args
‘‘3 7
[
‘‘7 8
$num
‘‘8 9
]
‘‘9 :
)
‘‘: ;
;
‘‘; <
var
’’ 
fileType
’’ 
=
’’ 
new
’’ 
PipeService
’’ *
(
’’* +
)
’’+ ,
.
’’, -
DetectMediaType
’’- <
(
’’< =
stream
’’= C
)
’’C D
;
’’D E
await
÷÷ 
Task
÷÷ 
.
÷÷ 
Delay
÷÷ 
(
÷÷ 
$num
÷÷  
)
÷÷  !
;
÷÷! "
return
◊◊ 
$"
◊◊ 
$str
◊◊ %
{
◊◊% &
args
◊◊& *
[
◊◊* +
$num
◊◊+ ,
]
◊◊, -
}
◊◊- .
$str
◊◊. 6
{
◊◊6 7
fileType
◊◊7 ?
}
◊◊? @
$str
◊◊@ A
"
◊◊A B
;
◊◊B C
}
ÿÿ 	
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ 
ex
ŸŸ 
)
ŸŸ 
{
⁄⁄ 	
return
€€ 
$"
€€ 
$str
€€ '
{
€€' (
ex
€€( *
.
€€* +
Message
€€+ 2
}
€€2 3
"
€€3 4
;
€€4 5
}
‹‹ 	
}
›› 
private
‚‚ 
record
‚‚ 
CommandRequest
‚‚ !
(
‚‚! "
string
‚‚" (
Command
‚‚) 0
)
‚‚0 1
;
‚‚1 2
}„„ †"
êC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Services\PipeService.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Services( 0
;0 1
public 
class 
PipeService 
: 
IPipeService '
{ 
public 


PipeResult 
? 
ReadPipedInput %
(% &
)& '
{ 
var		 
resultStream		 
=		 
new		 
MemoryStream		 +
(		+ ,
)		, -
;		- .
Console

 
.

 
OpenStandardInput

 !
(

! "
)

" #
.

# $
CopyTo

$ *
(

* +
resultStream

+ 7
)

7 8
;

8 9
resultStream 
. 
Position 
= 
$num  !
;! "
if 

( 
! 
resultStream 
. 
CanRead !
)! "
{ 	
Console 
. 
Error 
. 
	WriteLine #
(# $
$str$ N
)N O
;O P
return 
null 
; 
} 	
var 
	mediaType 
= 
DetectMediaType '
(' (
resultStream( 4
)4 5
;5 6
resultStream 
. 
Position 
= 
$num  !
;! "
return 
new 

PipeResult 
( 
	mediaType '
,' (
resultStream) 5
)5 6
;6 7
} 
public 

	MediaType 
DetectMediaType $
($ %
Stream% +
stream, 2
)2 3
{ 
byte 
[ 
] 
buffer 
= 
new 
byte  
[  !
$num! "
]" #
;# $
int 
	bytesRead 
= 
stream 
. 
Read #
(# $
buffer$ *
,* +
$num, -
,- .
buffer/ 5
.5 6
Length6 <
)< =
;= >
stream 
. 
Position 
= 
$num 
; 
if   

(   
	bytesRead   
<   
$num   
)   
return   !
	MediaType  " +
.  + ,
Text  , 0
;  0 1
if"" 

("" 
buffer"" 
["" 
$num"" 
]"" 
=="" 
$num"" 
&&""  
buffer""! '
[""' (
$num""( )
]"") *
==""+ -
$num"". 2
&&""3 5
buffer""6 <
[""< =
$num""= >
]""> ?
==""@ B
$num""C G
&&""H J
buffer""K Q
[""Q R
$num""R S
]""S T
==""U W
$num""X \
)""\ ]
return## 
	MediaType## 
.## 
PDF##  
;##  !
if%% 

(%% 
buffer%% 
[%% 
$num%% 
]%% 
==%% 
$num%% 
&&%%  
buffer%%! '
[%%' (
$num%%( )
]%%) *
==%%+ -
$num%%. 2
)%%2 3
return&& 
	MediaType&& 
.&& 
JPEG&& !
;&&! "
if(( 

((( 
buffer(( 
[(( 
$num(( 
](( 
==(( 
$num(( 
&&((  
buffer((! '
[((' (
$num((( )
](() *
==((+ -
$num((. 2
&&((3 5
buffer((6 <
[((< =
$num((= >
]((> ?
==((@ B
$num((C G
&&((H J
buffer((K Q
[((Q R
$num((R S
]((S T
==((U W
$num((X \
)((\ ]
return)) 
	MediaType)) 
.)) 
PNG))  
;))  !
return++ 
	MediaType++ 
.++ 
Text++ 
;++ 
},, 
}-- °
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Services\IServerService.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Services( 0
;0 1
public 
	interface 
IServerService 
{ 
Task 
RunServerAsync	 
( 
) 
; 
bool		 
ServerIsRunning			 
(		 
)		 
;		 
void 
StartServerProcess	 
( 
) 
; 
Task 
SendCommandAsync	 
( 
string  
command! (
)( )
;) *
} ˙
ëC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Services\IPipeService.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Services( 0
;0 1
public 
	interface 
IPipeService 
{ 

PipeResult 
? 
ReadPipedInput 
( 
)  
;  !
	MediaType

 
DetectMediaType

 
(

 
Stream

 $
stream

% +
)

+ ,
;

, -
} ∞
òC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Controllers\ServerController.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Controllers( 3
;3 4
public 
class 
ServerController 
: 
IServerController  1
{ 
private 
readonly 
IServerService #
_serverService$ 2
;2 3
public		 

ServerController		 
(		 
ServerService		 )
serverService		* 7
)		7 8
{

 
_serverService 
= 
serverService &
?? 
throw !
new" %!
ArgumentNullException& ;
(; <
nameof< B
(B C
serverServiceC P
)P Q
)Q R
;R S
} 
public 

async 
Task 
StartServerAsync &
(& '
)' (
{ 
await 
_serverService 
. 
RunServerAsync +
(+ ,
), -
;- .
} 
public 

async 
Task 
HandleCliCommand &
(& '
string' -
command. 5
)5 6
{ 
for 
( 
var 
i 
= 
$num 
; 
! 
IsServerRunning (
(( )
)) *
||+ -
i. /
==0 2
$num3 5
;7 8
i9 :
++: <
)< =
{ 	
Console 
. 
	WriteLine 
( 
$str P
)P Q
;Q R
_serverService 
. 
StartServerProcess -
(- .
). /
;/ 0
await 
Task 
. 
Delay 
( 
$num !
)! "
;" #
} 	
await 
_serverService 
. 
SendCommandAsync -
(- .
command. 5
)5 6
;6 7
} 
public!! 

bool!! 
IsServerRunning!! 
(!!  
)!!  !
{"" 
return## 
_serverService## 
.## 
ServerIsRunning## -
(##- .
)##. /
;##/ 0
}$$ 
}%% –
ôC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Controllers\IServerController.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Controllers( 3
;3 4
public 
	interface 
IServerController "
{ 
Task 
StartServerAsync	 
( 
) 
; 
Task 
HandleCliCommand	 
( 
string  
command! (
)( )
;) *
bool 
IsServerRunning	 
( 
) 
; 
} ≥
ïC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Presentation\Controllers\CliController.cs
	namespace 	
VirtualArboretum
 
. 
Presentation '
.' (
Controllers( 3
;3 4
public 
class 
CliController 
{ 
private		 
readonly		 
IPipeService		 !
_pipeService		" .
;		. /
private

 
readonly

 
IServerController

 &
_serverController

' 8
;

8 9
public 

CliController 
( 
PipeService $
pipeService% 0
,0 1
IServerController2 C
serverControllerD T
)T U
{ 
_pipeService 
= 
pipeService "
?? 
throw 
new  #!
ArgumentNullException$ 9
(9 :
nameof: @
(@ A
pipeServiceA L
)L M
)M N
;N O
_serverController 
= 
serverController ,
?? 
throw $
new% (!
ArgumentNullException) >
(> ?
nameof? E
(E F
serverControllerF V
)V W
)W X
;X Y
} 
public 

async 
Task 
HandleInput !
(! "
string" (
[( )
]) *
args+ /
)/ 0
{ 
if 

( 
args 
. 
Length 
> 
$num 
) 
{ 	
await 
_serverController #
.# $
HandleCliCommand$ 4
(4 5
string5 ;
.; <
Join< @
(@ A
$strA D
,D E
argsF J
)J K
)K L
;L M
return 
; 
} 	
if   

(   
Console   
.   
IsInputRedirected   %
)  % &
{!! 	
var"" 
result"" 
="" 
_pipeService"" %
.""% &
ReadPipedInput""& 4
(""4 5
)""5 6
;""6 7
if$$ 
($$ 
result$$ 
==$$ 
null$$ 
)$$ 
{%% 
await&& 
Console&& 
.&& 
Error&& #
.&&# $

WriteAsync&&$ .
(&&. /
$str&&/ [
)&&[ \
;&&\ ]
}'' 
else(( 
{)) 
await** 
ProcessPipedInput** '
(**' (
result**( .
.**. /
Type**/ 3
,**3 4
result**5 ;
.**; <
Context**< C
)**C D
;**D E
}++ 
},, 	
}-- 
private// 
async// 
Task// 
ProcessPipedInput// (
(//( )
	MediaType//) 2
	mediaType//3 <
,//< =
Stream//> D
content//E L
)//L M
{00 
switch11 
(11 
	mediaType11 
)11 
{22 	
case33 
	MediaType33 
.33 
Text33 
:33  
Console44 
.44 
Write44 
(44 
$str44 :
)44: ;
;44; <
break55 
;55 
default66 
:66 
Console77 
.77 
	WriteLine77 !
(77! "
$str77" b
)77b c
;77c d
break88 
;88 
}99 	
}:: 
};; ı7
óC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Infrastructure\Services\HyphaeSerializer.cs
	namespace 	
VirtualArboretum
 
. 
Infrastructure )
.) *
Services* 2
;2 3
public

 
class

 
HyphaeSerializer

 
{ 
public 

static 
ImmutableList 
<  
Hypha  %
>% &
Deserialize' 2
(2 3
string3 9
serial: @
)@ A
{ 
var 
serialHyphae 
= 
serial !
.! "
Split" '
(' (
HyphaKey( 0
.0 1
StartMarker1 <
)< =
;= >
var 
hyphae 
= 
new 
List 
< 
Hypha #
># $
($ %
serialHyphae% 1
.1 2
Length2 8
)8 9
;9 :
foreach 
( 
var 
serialHypha  
in! #
serialHyphae$ 0
)0 1
{ 	
if 
( 
String 
. 
IsNullOrWhiteSpace )
() *
serialHypha* 5
)5 6
)6 7
{ 
continue 
; 
} 
var 
hypha 
= 

ParseHypha "
(" #
serialHypha# .
). /
;/ 0
hyphae 
. 
Add 
( 
hypha 
) 
; 
} 	
return   
[   
..   
hyphae   
]   
;   
}!! 
private(( 
static(( 
Hypha(( 

ParseHypha(( #
(((# $
string(($ *
serialHyphae((+ 7
)((7 8
{)) 
var66 
hyphaHierarchy66 
=66 
serialHyphae66 )
.66) *
Split66* /
(66/ 0
HyphaKey660 8
.668 9
ExtensionDelimiter669 K
)66K L
.77 
Select77 
(77 
s77 
=>77 
s77 
.77 
Trim77 
(77  
)77  !
)77! "
.88 
Where88 
(88 
s88 
=>88 
!88 
string88 
.88  
IsNullOrEmpty88  -
(88- .
s88. /
)88/ 0
)880 1
.99 
Reverse99 
(99 
)99 
.:: 
ToImmutableList:: 
(:: 
):: 
;:: 
if<< 

(<< 
hyphaHierarchy<< 
.<< 
Count<<  
==<<! #
$num<<$ %
)<<% &
{== 	
throw?? 
new?? %
InvalidOperationException?? /
(??/ 0
$"@@ 
$str@@ .
{@@. /
serialHyphae@@/ ;
}@@; <
$str@@< =
"@@= >
)AA 
;AA 
}BB 	
ifDD 

(DD 
hyphaHierarchyDD 
.DD 
CountDD  
==DD! #
$numDD$ %
)DD% &
{EE 	
returnGG 
newGG 
	HyphaApexGG  
(GG  !
hyphaHierarchyGG! /
.GG/ 0
FirstGG0 5
(GG5 6
)GG6 7
)GG7 8
;GG8 9
}HH 	
varKK 
mostInnerHyphaKeyKK 
=KK 
hyphaHierarchyKK  .
[KK. /
$numKK/ 0
]KK0 1
;KK1 2
varLL 
serialHyphaValueLL 
=LL 
hyphaHierarchyLL -
.LL- .
FirstLL. 3
(LL3 4
)LL4 5
;LL5 6
varMM 
hyphaKeyHierarchyMM 
=MM 
hyphaHierarchyMM  .
.MM. /
RemoveRangeMM/ :
(MM: ;
$numMM; <
,MM< =
$numMM> ?
)MM? @
;MM@ A
varOO 

hyphaValueOO 
=OO 
ParseHyphaTypeOO '
(OO' (
mostInnerHyphaKeyOO( 9
,OO9 :
serialHyphaValueOO; K
)OOK L
;OOL M
varQQ 
hyphaeQQ 
=QQ 
newQQ 
HyphaeBuilderQQ &
(QQ& '

hyphaValueQQ' 1
)QQ1 2
;QQ2 3
foreachSS 
(SS 
varSS 
hyphaSS 
inSS 
hyphaKeyHierarchySS /
)SS/ 0
{TT 	
hyphaeUU 
.UU 
ExtendByUU 
(UU 
newUU 
HyphaKeyUU  (
(UU( )
hyphaUU) .
)UU. /
)UU/ 0
;UU0 1
}VV 	
returnXX 
hyphaeXX 
.XX 
BuildXX 
(XX 
)XX 
;XX 
}YY 
public__ 

static__ 
Hypha__ 
ParseHyphaType__ &
(__& '
string__' -
hyphaKey__. 6
,__6 7
string__8 >

hyphaValue__? I
)__I J
{`` 
ifbb 

(bb 
decimalbb 
.bb 
TryParsebb 
(bb 

hyphaValuebb '
,bb' (
outbb) ,
decimalbb- 4
numberbb5 ;
)bb; <
)bb< =
{cc 	
returndd 
newdd 
DecimalHyphadd #
(dd# $
hyphaKeydd$ ,
,dd, -
numberdd. 4
)dd4 5
;dd5 6
}ee 	
returngg 
newgg 
Hyphagg 
(gg 
hyphaKeyhh 
,hh 
newii 
	HyphaApexii 
(ii 

hyphaValueii $
)ii$ %
)jj 
;jj 
}kk 
publicpp 

staticpp 
stringpp 
	Serializepp "
(pp" #
Hyphapp# (
hyphaepp) /
)pp/ 0
{qq 
returnrr 
HyphaKeyrr 
.rr 
StartMarkerrr #
+rr$ %
HyphaeHierarchyrr& 5
.rr5 6
AsStringrr6 >
(rr> ?
hyphaerr? E
)rrE F
;rrF G
}ss 
publicxx 

staticxx 
stringxx 
	Serializexx "
(xx" #
IEnumerablexx# .
<xx. /
Hyphaxx/ 4
>xx4 5
hyphaexx6 <
)xx< =
{yy 
varzz 
	aggregatezz 
=zz 
newzz 
StringBuilderzz )
(zz) *
)zz* +
;zz+ ,
foreach{{ 
({{ 
var{{ 
hypha{{ 
in{{ 
hyphae{{ $
){{$ %
{|| 	
	aggregate}} 
.}} 
Append}} 
(}} 
	Serialize}} &
(}}& '
hypha}}' ,
)}}, -
)}}- .
;}}. /
}~~ 	
return
ÄÄ 
	aggregate
ÄÄ 
.
ÄÄ 
ToString
ÄÄ !
(
ÄÄ! "
)
ÄÄ" #
;
ÄÄ# $
}
ÅÅ 
}ÇÇ »
ñC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\StrongHyphaKey.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4Ë
çC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\Hypha.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
class 
Hypha 
{ 
public 

HyphaKey 
Key 
{ 
get 
; 
}  
public 

object 
Value 
{ 
get 
; 
init #
;# $
}% &
public!! 

Hypha!! 
(!! 
HyphaKey!! 
key!! 
,!! 
Hypha!! $
value!!% *
)!!* +
{"" 
Key## 
=## 
key## 
;## 
Value$$ 
=$$ 
value$$ 
;$$ 
}%% 
public&& 

Hypha&& 
(&& 
string&& 
key&& 
,&& 
Hypha&& "
value&&# (
)&&( )
:'' 	
this''
 
('' 
new'' 
HyphaKey'' 
('' 
key'' 
)''  
,''  !
value''" '
)''' (
{'') *
}''+ ,
	protected)) 
Hypha)) 
()) 
HyphaKey)) 
key))  
,))  !
object))" (
value))) .
))). /
{** 
Key++ 
=++ 
key++ 
;++ 
Value,, 
=,, 
value,, 
;,, 
}-- 
	protected// 
Hypha// 
(// 
string// 
key// 
,// 
object//  &
value//' ,
)//, -
:00 	
this00
 
(00 
new00 
HyphaKey00 
(00 
key00 
)00  
,00  !
value00" '
)00' (
{00) *
}00+ ,
public33 

bool33 

DoesExtend33 
(33 
)33 
{44 
return55 
Value55 
is55 
Hypha55 
;55 
}66 
public88 

Hypha88 
?88 
NextExtension88 
(88  
)88  !
{99 
return:: 
Value:: 
as:: 
Hypha:: 
;:: 
};; 
public?? 

override?? 
string?? 
ToString?? #
(??# $
)??$ %
{@@ 
returnAA 
$"AA 
{AA 
KeyAA 
}AA 
{AA 
HyphaKeyAA 
.AA  
ExtensionDelimiterAA  2
}AA2 3
{AA3 4
ValueAA4 9
}AA9 :
"AA: ;
;AA; <
}BB 
}DD Ê	
ëC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\HyphaApex.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
class 
	HyphaApex 
: 
Hypha 
{ 
public 

	HyphaApex 
( 
HyphaKey 
name "
)" #
: 	
base
 
( 
name 
, 
name 
) 
{ 
} 
public 

	HyphaApex 
( 
string 
name  
)  !
: 	
this
 
( 
new 
HyphaKey 
( 
name  
)  !
)! "
{# $
}% &
public 

override 
string 
ToString #
(# $
)$ %
{ 
return 
Key 
. 
ToString 
( 
) 
; 
} 
} ˛
êC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\HyphaKey.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
class 
HyphaKey 
{		 
public

 

static

 
readonly

 
char

 
StartMarker

  +
=

, -
$char

. 1
;

1 2
public 

static 
readonly 
char 
ExtensionDelimiter  2
=3 4
$char5 8
;8 9
public 

static 
readonly 
char 
[  
]  !
ReservedChars" /
=0 1
[2 3
StartMarker3 >
,> ?
ExtensionDelimiter@ R
]R S
;S T
public 

string 
Value 
{ 
get 
; 
init #
;# $
}% &
public 

HyphaKey 
( 
string 
value  
)  !
{ 
if 

( 
string 
. 
IsNullOrWhiteSpace %
(% &
value& +
)+ ,
), -
{ 	
throw 
new 
ArgumentException '
(' (
$str ;
) 
; 
} 	
if!! 

(!! 
ReservedChars!! 
.!! 
Any!! 
(!! 
value!! #
.!!# $
Contains!!$ ,
)!!, -
)!!- .
{"" 	
var## 
reservedChars## 
=## 
string##  &
.##& '
Join##' +
(##+ ,
$str##, 1
,##1 2
ReservedChars##3 @
)##@ A
;##A B
throw$$ 
new$$ 
ArgumentException$$ '
($$' (
$"%% 
$str%% @
{%%@ A
reservedChars%%A N
}%%N O
$str%%O Q
"%%Q R
)&& 
;&& 
}'' 	
Value)) 
=)) 
value)) 
;)) 
}** 
public,, 

override,, 
string,, 
ToString,, #
(,,# $
),,$ %
=>,,& (
Value,,) .
;,,. /
public.. 

virtual.. 
char.. !
GetExtensionDelimiter.. -
(..- .
)... /
{// 
return00 
ExtensionDelimiter00 !
;00! "
}11 
public33 

virtual33 
char33 
GetStartMarker33 &
(33& '
)33' (
{44 
return55 
StartMarker55 
;55 
}66 
}77 œ0
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\Fingerprint.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
sealed 
class 
Fingerprint 
{ 
public 

Guid 
Pattern 
{ 
get 
; 
init #
;# $
}% &
public 

Fingerprint 
( 
Guid 
pattern #
)# $
{ 
Pattern 
= 
pattern 
; 
} 
public 

Fingerprint 
( 
) 
: 
this 
(  
Guid  $
.$ %
CreateVersion7% 3
(3 4
)4 5
)5 6
{ 
} 
public 

static 
Fingerprint 
? 
	TryCreate (
(( )
string) /!
serializedFingerprint0 E
)E F
{ 
if 

( 
Guid 
. 
TryParse 
( !
serializedFingerprint /
,/ 0
out1 4
var5 8
id9 ;
); <
)< =
{ 	
return 
new 
Fingerprint "
(" #
id# %
)% &
;& '
}   	
return!! 
null!! 
;!! 
}"" 
public%% 

DateTimeOffset%% 
GetCreationDateTime%% -
(%%- .
)%%. /
{&& 
var** 
version7Guid** 
=** 
Pattern** "
;**" #
Span++ 
<++ 
byte++ 
>++ 
bytes++ 
=++ 

stackalloc++ %
byte++& *
[++* +
$num+++ -
]++- .
;++. /
if,, 

(,, 
!,, 
version7Guid,, 
.,, 
TryWriteBytes,, '
(,,' (
bytes,,( -
),,- .
),,. /
{-- 	
throw// 
new// 
ArgumentException// '
(//' (
$str00 6
,006 7
nameof008 >
(00> ?
version7Guid00? K
)00K L
)11 
;11 
}22 	
int== 
	originalA== 
=== 
BinaryPrimitives== (
.==( )!
ReadInt32LittleEndian==) >
(==> ?
bytes==? D
.==D E
Slice==E J
(==J K
$num==K L
,==L M
$num==N O
)==O P
)==P Q
;==Q R
short>> 
	originalB>> 
=>> 
BinaryPrimitives>> *
.>>* +!
ReadInt16LittleEndian>>+ @
(>>@ A
bytes>>A F
.>>F G
Slice>>G L
(>>L M
$num>>M N
,>>N O
$num>>P Q
)>>Q R
)>>R S
;>>S T
short?? 
	originalC?? 
=?? 
BinaryPrimitives?? *
.??* +!
ReadInt16LittleEndian??+ @
(??@ A
bytes??A F
.??F G
Slice??G L
(??L M
$num??M N
,??N O
$num??P Q
)??Q R
)??R S
;??S T
byte@@ 
	originalD@@ 
=@@ 
bytes@@ 
[@@ 
$num@@  
]@@  !
;@@! "
ifEE 

(EE 
(EE 
	originalCEE 
&EE 
$numEE 
)EE  
!=EE! #
$numEE$ *
)EE* +
{FF 	
throwGG 
newGG 
ArgumentExceptionGG '
(GG' (
$strHH >
,HH> ?
nameofHH@ F
(HHF G
version7GuidHHG S
)HHS T
)II 
;II 
}JJ 	
ifNN 

(NN 
(NN 
	originalDNN 
&NN 
$numNN 
)NN 
!=NN !
$numNN" &
)NN& '
{OO 	
throwPP 
newPP 
ArgumentExceptionPP '
(PP' (
$strQQ E
,QQE F
nameofQQG M
(QQM N
version7GuidQQN Z
)QQZ [
)RR 
;RR 
}SS 	
longZZ 
highPartZZ 
=ZZ 
(ZZ 
uintZZ 
)ZZ 
	originalAZZ '
;ZZ' (
long[[ 
lowPart[[ 
=[[ 
([[ 
ushort[[ 
)[[ 
	originalB[[ (
;[[( )
long__ 
timeMilliseconds__ 
=__ 
(__  !
highPart__! )
<<__* ,
$num__- /
)__/ 0
|__1 2
lowPart__3 :
;__: ;
returnbb 
DateTimeOffsetbb 
.bb $
FromUnixTimeMillisecondsbb 6
(bb6 7
timeMillisecondsbb7 G
)bbG H
;bbH I
}cc 
publicee 

staticee 
ImmutableArrayee  
<ee  !
Fingerprintee! ,
>ee, --
!SortedFingerprintsChronologicallyee. O
(eeO P
IEnumerableeeP [
<ee[ \
Fingerprintee\ g
>eeg h

signatureseei s
)ees t
{ff 
returngg 
[gg 
..hh 

signatureshh 
.hh 
OrderByhh  
(hh  !
xhh! "
=>hh# %
xhh& '
.hh' (
Patternhh( /
)hh/ 0
]ii 	
;ii	 

}jj 
privatemm 
constmm 
stringmm 
Alphanumericalsmm (
=mm) *
$strmm+ M
;mmM N
public
àà 

override
àà 
string
àà 
ToString
àà #
(
àà# $
)
àà$ %
{
ââ 
return
ää 
this
ää 
.
ää 
Pattern
ää 
.
ää 
ToString
ää $
(
ää$ %
)
ää% &
;
ää& '
}
ãã 
}åå ⁄

îC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\DecimalHypha.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
class 
DecimalHypha 
: 
Hypha !
{ 
public		 

DecimalHypha		 
(		 
string		 
name		 #
,		# $
Decimal		% ,
value		- 2
)		2 3
:

 	
base


 
(

 
name

 
,

 
value

 
)

 
{ 
} 
public 

DecimalHypha 
( 
string 
name #
,# $
int% (
value) .
). /
: 	
this
 
( 
name 
, 
new 
Decimal  
(  !
value! &
)& '
)' (
{ 
} 
public 

Decimal 
	AsDecimal 
( 
) 
{ 
return 
( 
Decimal 
) 
Value 
; 
} 
} É
åC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\ValueObjects\Cell.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
ValueObjects' 3
;3 4
public 
class 
Cell 
{ 
public 

readonly 
Fingerprint 
UniqueMarker  ,
;, -
public 

ContentType 
Type 
{ 
get !
;! "
}# $
public 

ReadOnlyMemory 
< 
byte 
> 
Organell  (
{) *
get+ .
;. /
}0 1
public 

Cell 
( 
ReadOnlyMemory 
< 
byte #
># $
organell% -
,- .
ContentType/ :
type; ?
,? @
FingerprintA L
uniqueMarkerM Y
)Y Z
{ 
UniqueMarker 
= 
uniqueMarker #
;# $
Type 
= 
type 
?? 
throw 
new  !
ArgumentNullException! 6
(6 7
nameof7 =
(= >
type> B
)B C
)C D
;D E
Organell 
= 
organell 
; 
} 
} ⁄*
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Services\HyphaeHierarchy.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Services' /
;/ 0
public		 
class		 
HyphaeHierarchy		 
{

 
public 

static 
ImmutableArray  
<  !
HyphaKey! )
>) *
	Aggregate+ 4
(4 5
Hypha5 :
root; ?
)? @
{ 
return 
[ 
.. 
AggregateSubHyphae %
(% &
root& *
,* +
$num, -
)- .
.. /
Item1/ 4
]4 5
;5 6
} 
public 

static 
string 
AsString !
(! "
Hypha" '
root( ,
), -
{ 
ImmutableArray 
< 
HyphaKey 
>  
	aggregate! *
=+ ,
	Aggregate- 6
(6 7
root7 ;
); <
;< =
var 
serializedAggregate 
=  !
new" %
StringBuilder& 3
(3 4
	aggregate4 =
.= >
Length> D
)D E
;E F
foreach 
( 
var 
hyphaKey 
in  
	aggregate! *
)* +
{ 	
serializedAggregate 
.  
Append  &
(& '
hyphaKey' /
)/ 0
;0 1
serializedAggregate 
.  
Append  &
(& '
hyphaKey' /
./ 0!
GetExtensionDelimiter0 E
(E F
)F G
)G H
;H I
}   	
var"" 
lastElementIdx"" 
="" 
serializedAggregate"" 0
.""0 1
Length""1 7
-""8 9
$num"": ;
;""; <
serializedAggregate## 
.## 
Remove## "
(##" #
lastElementIdx### 1
,##1 2
$num##3 4
)##4 5
;##5 6
return&& 
serializedAggregate&& "
.&&" #
ToString&&# +
(&&+ ,
)&&, -
;&&- .
}(( 
private** 
static** 
(** 
HyphaKey** 
[** 
]** 
,** 
ushort**  &
)**& '
AggregateSubHyphae**( :
(**: ;
Hypha**; @
label**A F
,**F G
ushort**H N
depth**O T
=**U V
$num**W X
)**X Y
{++ 
if,, 

(,, 
label,, 
.,, 

DoesExtend,, 
(,, 
),, 
),, 
{-- 	
var.. 
(.. 
list.. 
,.. 
index.. 
).. 
=.. 
AggregateSubHyphae..  2
(..2 3
label// 
.// 
NextExtension// #
(//# $
)//$ %
!//% &
,//& '
++00 
depth00 
)11 
;11 
list33 
[33 
index33 
]33 
=33 
label33 
.33  
Key33  #
;33# $
return44 
(44 
list44 
,44 
--44 
index44 !
)44! "
;44" #
}55 	
HyphaKey88 
[88 
]88 
	aggregate88 
=88 
new88 "
HyphaKey88# +
[88+ ,
depth88, 1
]881 2
;882 3
depth99 
-=99 
$num99 
;99 
	aggregate:: 
[:: 
depth:: 
]:: 
=:: 
label::  
.::  !
Key::! $
;::$ %
depth;; 
-=;; 
$num;; 
;;; 
return<< 
(<< 
	aggregate<< 
,<< 
depth<<  
)<<  !
;<<! "
}== 
publicCC 

staticCC 
ImmutableArrayCC  
<CC  !
HyphaCC! &
>CC& '
FlattenCC( /
(CC/ 0
HyphaCC0 5
hyphaCC6 ;
)CC; <
{DD 
varEE 

flatHyphaeEE 
=EE 
newEE 
ListEE !
<EE! "
HyphaEE" '
>EE' (
(EE( )
)EE) *
{EE+ ,
hyphaEE- 2
}EE3 4
;EE4 5
whileFF 
(FF 
hyphaFF 
.FF 

DoesExtendFF 
(FF  
)FF  !
)FF! "
{GG 	
ifHH 
(HH 
hyphaHH 
.HH 
ValueHH 
isHH 
HyphaHH $
continuingHyphaHH% 4
)HH4 5
{II 

flatHyphaeJJ 
.JJ 
AddJJ 
(JJ 
continuingHyphaKK #
)LL 
;LL 
hyphaNN 
=NN 
continuingHyphaNN '
;NN' (
}OO 
elsePP 
{QQ 
breakRR 
;RR 
}SS 
}UU 	
returnWW 
[WW 
..WW 

flatHyphaeWW 
]WW 
;WW 
}XX 
}YY ª
åC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Interfaces\ISepta.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '

Interfaces' 1
;1 2
public 
	interface 
ISepta 
: 
IGrowthStep %
{ 
} ù
ëC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Interfaces\IGrowthStep.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '

Interfaces' 1
;1 2
public 
	interface 
IGrowthStep 
{ 
}		 ç
äC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\Plexus.cs€
âC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\Plant.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public 
class 
Plant 
{ 
public

 

	HyphaApex

 
Name

 
{ 
get 
; 
init 
; 
} 
public 

readonly 
Fingerprint 
UniqueMarker  ,
;, -
public 


Dictionary 
< 
string 
, 
Hypha #
># $
?$ %
AssociatedHyphae& 6
;6 7
public 
%
ImmutableSortedDictionary $
<$ %
Fingerprint% 0
,0 1
Cell2 6
>6 7
Cells8 =
{ 
get 
; 
init 
; 
} 
public 

Plant 
( 
Fingerprint 
uniqueMarker  
,  !
	HyphaApex 
name 
, 
IEnumerable 
< 
Cell 
> 
cells 
,  
IEnumerable 
< 
Hypha 
> 
? 
associatedHyphae ,
)   	
{!! 
UniqueMarker"" 
="" 
uniqueMarker"" #
;""# $
Name## 
=## 
name## 
;## 
Cells$$ 
=$$ 
cells$$ 
.$$ '
ToImmutableSortedDictionary$$ 1
($$1 2
cell%% 
=>%% 
cell%% 
.%% 
UniqueMarker%% %
,%%% &
cell&& 
=>&& 
cell&& 
)'' 
;'' 
AssociatedHyphae)) 
=)) 
associatedHyphae)) +
?))+ ,
.)), -
ToDictionary))- 9
())9 :
HyphaeHierarchy** 
.** 
AsString** $
,**$ %
hypha++ 
=>++ 
hypha++ 
),, 
??,, 
new,, 

Dictionary,, 
<,,  
string,,  &
,,,& '
Hypha,,( -
>,,- .
(,,. /
),,/ 0
;,,0 1
}-- 
public00 

static00 
Plant00 
	Cultivate00 !
(00! "
Cell11 
seed11 
,11 
string11 
?11 
name11 
,11  
IEnumerable11! ,
<11, -
Cell11- 1
>111 2
cells113 8
,118 9
IEnumerable11: E
<11E F
Hypha11F K
>11K L
?11L M
associatedHyphae11N ^
)22 	
{33 
var44 
uniqueMarker44 
=44 
new44 
Fingerprint44 *
(44* +
)44+ ,
;44, -
return55 
new55 
Plant55 
(55 
uniqueMarker66 
,66 
new77 
	HyphaApex77 
(77 
name77 
??77 !
uniqueMarker77" .
.77. /
ToString77/ 7
(777 8
)778 9
)779 :
,77: ;
cells88 
,88 
associatedHyphae88 #
)99 	
;99	 

}:: 
}<< ¬
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\PhenotypedPlant.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public 
class 
PhenotypedPlant 
{ 
public 

Fingerprint 
UniqueMarker #
{$ %
get& )
;) *
init+ /
;/ 0
}1 2
public 

ImmutableDictionary 
< 
Fingerprint *
,* +
Cell, 0
>0 1
Cells2 7
{8 9
get: =
;= >
init? C
;C D
}E F
public 
%
ImmutableSortedDictionary $
<$ %
string% +
,+ ,
Hypha- 2
>2 3
AssociateHyphae4 C
{D E
getF I
;I J
initK O
;O P
}Q R
public 

PhenotypedPlant 
( 
Plant  

originator! +
,+ ,
DateTimeOffset- ;
?; <
timeSliceIdentifier= P
)P Q
{ 
UniqueMarker 
= 
new 
Fingerprint &
(& '
Guid 
. 
CreateVersion7 
(  
timeSliceIdentifier  3
??4 6
DateTimeOffset7 E
.E F
NowF I
)I J
) 
; 
Cells 
= 

originator 
. 
Cells  
.  !!
ToImmutableDictionary! 6
(6 7
cell 
=> 
cell 
. 
Key 
, 
cell 
=> 
cell 
. 
Value 
) 	
;	 

if 

( 

originator 
. 
AssociatedHyphae '
==( *
null+ /
)/ 0
{   	
AssociateHyphae!! 
=!! %
ImmutableSortedDictionary!! 7
<!!7 8
string!!8 >
,!!> ?
Hypha!!@ E
>!!E F
.!!F G
Empty!!G L
;!!L M
}"" 	
else## 
{$$ 	
AssociateHyphae%% 
=%% 

originator%% (
.%%( )
AssociatedHyphae%%) 9
.%%9 :'
ToImmutableSortedDictionary%%: U
(%%U V
kvp&& 
=>&& 
kvp&& 
.&& 
Key&& 
,&& 
kvp'' 
=>'' 
kvp'' 
.'' 
Value''  
)(( 
;(( 
})) 	
}** 
}++ ˝
éC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\Mycorrhiza.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public 
class 

Mycorrhiza 
{		 
private

 
int

 
_dummy

 
=

 
$num

 
;

 
} ë
çC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\Incubator.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public 
class 
	Incubator 
{ 
} «
íC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\AggregateRoots\Mycelium.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
AggregateRoots' 5
;5 6
public 
class 
Mycelium 
{ 
private 
readonly  
ConcurrentDictionary )
<) *
HyphaKey* 2
,2 3
ConcurrentBag4 A
<A B
HyphaB G
>G H
>H I
HyphalPlexusJ V
;V W
private 
readonly  
ConcurrentDictionary )
<) *
HyphaKey* 2
,2 3
ConcurrentBag4 A
<A B
FingerprintB M
>M N
>N O#
MycorrhizalAssociationsP g
;g h
public 

Mycelium 
( 
IEnumerable 
< 
Hypha 
> 
hyphae !
,! " 
ConcurrentDictionary 
< 
HyphaKey %
,% &
ConcurrentBag' 4
<4 5
Fingerprint5 @
>@ A
>A B#
mycorrhizalAssociationsC Z
) 	
{ #
MycorrhizalAssociations 
=  !#
mycorrhizalAssociations" 9
;9 :
HyphalPlexus 
= 
new  
ConcurrentDictionary /
</ 0
HyphaKey0 8
,8 9
ConcurrentBag: G
<G H
HyphaH M
>M N
>N O
(O P
concurrencyLevel   
:   
$num   
,    
capacity!! 
:!! 
hyphae!! 
.!! 
Count!! "
(!!" #
)!!# $
)"" 
;"" 
this%% 
.%% 

ExtendWith%% 
(%% 
hyphae%% 
)%% 
;%%  
})) 
private++ 
void++ 

ExtendWith++ 
(++ 
IEnumerable++ '
<++' (
Hypha++( -
>++- .
hyphae++/ 5
)++5 6
{,, 
throw-- 
new-- #
NotImplementedException-- )
(--) *
)--* +
;--+ ,
}.. 
public11 

HyphaKey11 

ExtendWith11 
(11 
Hypha11 $
hypha11% *
)11* +
{22 
this33 
.33 

ExtendWith33 
(33 
HyphaeHierarchy44 
.44 
Flatten44 #
(44# $
hypha44$ )
)44) *
)55 
;55 
return77 
hypha77 
.77 
Key77 
;77 
}88 
}>> è*
ëC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\HyphaeBuilder.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public

 
class

 
HyphaeBuilder

 
{ 
private 
readonly 
List 
< 
HyphaKey "
>" #
_hyphaeStrain$ 1
;1 2
private 
readonly 
Hypha 
_root  
;  !
public 

HyphaeBuilder 
( 
Hypha 
root #
,# $
List% )
<) *
HyphaKey* 2
>2 3
?3 4
hyphaeStrain5 A
)A B
{ 
this 
. 
_root 
= 
root 
; 
this 
. 
_hyphaeStrain 
= 
hyphaeStrain )
??* ,
new- 0
List1 5
<5 6
HyphaKey6 >
>> ?
(? @
)@ A
;A B
} 
public 

HyphaeBuilder 
( 
Hypha 
root #
,# $
List% )
<) *
Hypha* /
>/ 0
hyphaeStrain1 =
)= >
: 	
this
 
( 
root 
, 
hyphaeStrain !
.! "
Select" (
(( )
hypha) .
=>/ 1
hypha2 7
.7 8
Key8 ;
); <
.< =
ToList= C
(C D
)D E
)E F
{G H
}I J
public 

HyphaeBuilder 
( 
Hypha 
root #
,# $
Hypha% *
hyphaeStrain+ 7
)7 8
: 	
this
 
( 
root 
, 
HyphaeHierarchy 
. 
	Aggregate 
( 
hyphaeStrain '
)' (
. 
ToList 
( 
) 
)   
{!! 
}!! 
public## 

HyphaeBuilder## 
(## 
Hypha## 
root## #
)### $
:$$ 	
this$$
 
($$ 
root$$ 
,$$ 
new$$ 
List$$ 
<$$ 
HyphaKey$$ &
>$$& '
($$' (
)$$( )
)$$) *
{$$+ ,
}$$- .
public66 

HyphaeBuilder66 
ExtendBy66 !
(66! "
HyphaKey66" *
key66+ .
)66. /
{77 
_hyphaeStrain88 
.88 
Add88 
(88 
key88 
)88 
;88 
return99 
this99 
;99 
}:: 
public<< 

HyphaeBuilder<< 
ExtendBy<< !
(<<! "
Hypha<<" '
hypha<<( -
)<<- .
{== 
return>> 
this>> 
.>> 
ExtendBy>> 
(>> 
hypha>> "
.>>" #
Key>># &
)>>& '
;>>' (
}?? 
publicAA 

HyphaAA 
BuildAA 
(AA 
)AA 
{BB 
HyphaCC 
?CC 
hyphaeCC 
=CC 
thisCC 
.CC 
_rootCC "
;CC" #
ifEE 

(EE 
hyphaeEE 
==EE 
nullEE 
&&EE 
_hyphaeStrainEE +
.EE+ ,
CountEE, 1
==EE2 4
$numEE5 6
)EE6 7
{FF 	
throwGG 
newGG %
InvalidOperationExceptionGG /
(GG/ 0
$strHH &
+HH' (
$strII .
+II/ 0
$strJJ E
)KK 
;KK 
}LL 	
_hyphaeStrainNN 
.NN 
ReverseNN 
(NN 
)NN 
;NN  
ifSS 

(SS 
hyphaeSS 
==SS 
nullSS 
)SS 
{TT 	
hyphaeVV 
=VV 
newVV 
	HyphaApexVV "
(VV" #
_hyphaeStrainVV# 0
[VV0 1
$numVV1 2
]VV2 3
)VV3 4
;VV4 5
_hyphaeStrainWW 
.WW 
RemoveAtWW "
(WW" #
$numWW# $
)WW$ %
;WW% &
}XX 	
foreach\\ 
(\\ 
var\\ 
key\\ 
in\\ 
_hyphaeStrain\\ )
)\\) *
{]] 	
hyphae^^ 
=^^ 
new^^ 
Hypha^^ 
(^^ 
key^^ "
,^^" #
hyphae^^$ *
)^^* +
;^^+ ,
}__ 	
returnaa 
hyphaeaa 
;aa 
}bb 
publicdd 

overridedd 
stringdd 
ToStringdd #
(dd# $
)dd$ %
{ee 
returnff 
HyphaeHierarchyff 
.ff 
AsStringff '
(ff' (
thisgg 
.gg 
Buildgg 
(gg 
)gg 
)hh 
;hh 
}ii 
}jj ù
äC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\Entities\Garden.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
Entities' /
;/ 0
public 
class 
Garden 
{ 
private 
string 
Location 
{ 
get !
;! "
}# $
public 

Garden 
( 
string 
location !
)! "
{ 
Location		 
=		 
location		 
??		 
throw		 $
new		% (!
ArgumentNullException		) >
(		> ?
nameof		? E
(		E F
location		F N
)		N O
)		O P
;		P Q
}

 
} ›
ìC:\Users\feblank\OneDrive - student.dhbw-karlsruhe.de\Stu-di-um\6. Semester - Adv.SWE - VA\VirtualArboretum\Core\Domain\AggregateRoots\Arboretum.cs
	namespace 	
VirtualArboretum
 
. 
Core 
.  
Domain  &
.& '
AggregateRoots' 5
;5 6
public 
class 
	Arboretum 
{ 
public

 

	Arboretum

 
(

 

Collection

 
<

  
Garden

  &
>

& '
gardens

( /
)

/ 0
{ 
Gardens 
= 
gardens 
; 
} 
private 

Collection 
< 
Garden 
> 
Gardens &
{' (
get) ,
;, -
}. /
} 